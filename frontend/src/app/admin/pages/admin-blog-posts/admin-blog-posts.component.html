<section class="space-y-8">
  <header class="flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between">
    <div>
      <h1 class="text-2xl font-semibold text-primary">Blog posts</h1>
      <p class="text-sm text-primary/70">Manage your editorial content and publish new stories.</p>
    </div>
    <button
      class="inline-flex items-center justify-center rounded-lg border border-primary px-4 py-2 text-sm font-medium text-primary hover:bg-primary hover:text-white transition-colors"
      type="button"
      (click)="startNew()"
    >
      New post
    </button>
  </header>

  <div class="grid gap-8 lg:grid-cols-[minmax(0,2fr)_minmax(0,1fr)]">
    <div class="overflow-hidden rounded-2xl border border-gray-100 bg-white shadow-sm">
      <div class="overflow-x-auto">
        <table class="min-w-full text-left text-sm">
          <thead class="bg-gray-50 text-xs uppercase tracking-wide text-primary/60">
            <tr>
              <th class="px-4 py-3">Title</th>
              <th class="px-4 py-3">Category</th>
              <th class="px-4 py-3">Published</th>
              <th class="px-4 py-3">Featured</th>
              <th class="px-4 py-3 text-right">Actions</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let post of posts; trackBy: trackById" class="border-t border-gray-100">
              <td class="px-4 py-3">
                <p class="font-medium text-primary">{{ post.title }}</p>
                <p class="text-xs text-primary/60">/{{ post.slug }}</p>
              </td>
              <td class="px-4 py-3 text-primary/80">{{ post.category }}</td>
              <td class="px-4 py-3 text-primary/80">{{ post.publishedAt | date: 'MMM dd, yyyy' }}</td>
              <td class="px-4 py-3">
                <span
                  class="inline-flex rounded-full px-3 py-1 text-xs font-semibold"
                  [ngClass]="post.featured ? 'bg-emerald-100 text-emerald-700' : 'bg-gray-100 text-gray-600'"
                >
                  {{ post.featured ? 'Yes' : 'No' }}
                </span>
              </td>
              <td class="px-4 py-3 text-right">
                <div class="flex items-center justify-end gap-2">
                  <button
                    class="rounded-lg border border-gray-200 px-3 py-1 text-xs font-medium text-primary hover:border-primary"
                    type="button"
                    (click)="editPost(post)"
                  >
                    Edit
                  </button>
                  <button
                    class="rounded-lg border border-rose-200 px-3 py-1 text-xs font-medium text-rose-600 hover:bg-rose-50"
                    type="button"
                    (click)="deletePost(post)"
                  >
                    Delete
                  </button>
                </div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <div class="rounded-2xl border border-gray-100 bg-white p-6 shadow-sm">
      <h2 class="text-lg font-semibold text-primary mb-4">{{ editingPost ? 'Edit post' : 'Create post' }}</h2>
      <form class="space-y-4" [formGroup]="form" (ngSubmit)="savePost()">
        <div>
          <label class="text-xs font-semibold text-primary/70">Title</label>
          <input class="mt-1 w-full rounded-lg border border-gray-200 px-3 py-2 text-sm" formControlName="title" />
        </div>
        <div>
          <label class="text-xs font-semibold text-primary/70">Slug</label>
          <input class="mt-1 w-full rounded-lg border border-gray-200 px-3 py-2 text-sm" formControlName="slug" />
        </div>
        <div>
          <label class="text-xs font-semibold text-primary/70">Excerpt</label>
          <textarea
            class="mt-1 w-full rounded-lg border border-gray-200 px-3 py-2 text-sm"
            rows="3"
            formControlName="excerpt"
          ></textarea>
        </div>
        <div>
          <label class="text-xs font-semibold text-primary/70">Cover image URL</label>
          <input class="mt-1 w-full rounded-lg border border-gray-200 px-3 py-2 text-sm" formControlName="coverImage" />
        </div>
        <div>
          <label class="text-xs font-semibold text-primary/70">Cover image caption</label>
          <input
            class="mt-1 w-full rounded-lg border border-gray-200 px-3 py-2 text-sm"
            formControlName="coverImageCaption"
          />
        </div>
        <div>
          <label class="text-xs font-semibold text-primary/70">Category</label>
          <select class="mt-1 w-full rounded-lg border border-gray-200 px-3 py-2 text-sm" formControlName="category">
            <option *ngFor="let category of categories" [value]="category">{{ category }}</option>
          </select>
        </div>
        <div>
          <label class="text-xs font-semibold text-primary/70">Author name</label>
          <input class="mt-1 w-full rounded-lg border border-gray-200 px-3 py-2 text-sm" formControlName="authorName" />
        </div>
        <div>
          <label class="text-xs font-semibold text-primary/70">Author avatar URL</label>
          <input class="mt-1 w-full rounded-lg border border-gray-200 px-3 py-2 text-sm" formControlName="authorAvatar" />
        </div>
        <div>
          <label class="text-xs font-semibold text-primary/70">Author bio</label>
          <textarea
            class="mt-1 w-full rounded-lg border border-gray-200 px-3 py-2 text-sm"
            rows="2"
            formControlName="authorBio"
          ></textarea>
        </div>
        <div class="grid gap-3 sm:grid-cols-2">
          <div>
            <label class="text-xs font-semibold text-primary/70">Published date</label>
            <input class="mt-1 w-full rounded-lg border border-gray-200 px-3 py-2 text-sm" type="date" formControlName="publishedAt" />
          </div>
          <div>
            <label class="text-xs font-semibold text-primary/70">Read time</label>
            <input class="mt-1 w-full rounded-lg border border-gray-200 px-3 py-2 text-sm" formControlName="readTime" />
          </div>
        </div>
        <div>
          <label class="text-xs font-semibold text-primary/70">Tags (comma separated)</label>
          <input class="mt-1 w-full rounded-lg border border-gray-200 px-3 py-2 text-sm" formControlName="tags" />
        </div>
        <div class="flex items-center gap-2">
          <input id="featured" class="h-4 w-4" type="checkbox" formControlName="featured" />
          <label for="featured" class="text-sm text-primary/80">Feature on blog landing</label>
        </div>
        <div>
          <label class="text-xs font-semibold text-primary/70">Content blocks JSON</label>
          <textarea
            class="mt-1 w-full rounded-lg border border-gray-200 px-3 py-2 text-xs font-mono"
            rows="8"
            formControlName="contentJson"
          ></textarea>
          <p class="mt-1 text-xs text-primary/60">Paste an array of content blocks (paragraph, heading, blockquote, product).</p>
        </div>
        <p *ngIf="formError" class="text-sm text-rose-600">{{ formError }}</p>
        <div class="flex items-center gap-3">
          <button
            class="inline-flex items-center justify-center rounded-lg bg-primary px-4 py-2 text-sm font-semibold text-white hover:bg-primary/90"
            type="submit"
          >
            {{ editingPost ? 'Save changes' : 'Create post' }}
          </button>
          <button
            class="inline-flex items-center justify-center rounded-lg border border-gray-200 px-4 py-2 text-sm font-semibold text-primary"
            type="button"
            (click)="startNew()"
          >
            Reset
          </button>
        </div>
      </form>
    </div>
  </div>
</section>
